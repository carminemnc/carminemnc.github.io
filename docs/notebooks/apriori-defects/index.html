<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Carmine Minichini">
<meta name="dcterms.date" content="2024-08-09">
<meta name="description" content="Priori Patterns for Posterior Perfection">

<title>Apriori analysis for quality assurance</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../imgs/carminemnc_w_500x500.webp" rel="icon">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-BEX0MX4L1P"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-BEX0MX4L1P', { 'anonymize_ip': true});
</script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif:wght@400;700&amp;display=swap" rel="stylesheet">

<script src="../../site_libs/core-js-2.5.3/shim.min.js"></script>
<script src="../../site_libs/react-18.2.0/react.min.js"></script>
<script src="../../site_libs/react-18.2.0/react-dom.min.js"></script>
<script src="../../site_libs/reactwidget-2.0.0/react-tools.js"></script>
<link href="../../site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="../../site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="../../site_libs/reactable-0.4.4/reactable.css" rel="stylesheet">
<script src="../../site_libs/reactable-binding-0.4.4/reactable.js"></script>
<link href="../../site_libs/vis-9.1.0/vis-network.min.css" rel="stylesheet">
<script src="../../site_libs/vis-9.1.0/vis-network.min.js"></script>
<script src="../../site_libs/visNetwork-binding-2.1.2/visNetwork.js"></script>

  <script>window.backupDefine = window.define; window.define = undefined;</script><script src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css">

</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../imgs/carminemnc_x_500x500.webp" alt="" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../posts.html" rel="" target="">
 <span class="menu-text">Posts</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../projects.html" rel="" target="">
 <span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../notebooks.html" rel="" target="">
 <span class="menu-text">Notebooks</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../resume/carmine_minichini_resume.pdf" rel="" target="">
 <span class="menu-text">Resume</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#the-apriori-algorithm" id="toc-the-apriori-algorithm" class="nav-link active" data-scroll-target="#the-apriori-algorithm">The Apriori algorithm</a>
  <ul class="collapse">
  <li><a href="#application-in-quality-assurance" id="toc-application-in-quality-assurance" class="nav-link" data-scroll-target="#application-in-quality-assurance">Application in quality assurance</a></li>
  </ul></li>
  <li><a href="#about-the-data" id="toc-about-the-data" class="nav-link" data-scroll-target="#about-the-data">About the data</a></li>
  <li><a href="#the-three-core-metrics" id="toc-the-three-core-metrics" class="nav-link" data-scroll-target="#the-three-core-metrics">The three core metrics</a>
  <ul class="collapse">
  <li><a href="#support" id="toc-support" class="nav-link" data-scroll-target="#support">Support</a></li>
  <li><a href="#confidence" id="toc-confidence" class="nav-link" data-scroll-target="#confidence">Confidence</a></li>
  <li><a href="#lift" id="toc-lift" class="nav-link" data-scroll-target="#lift">Lift</a></li>
  </ul></li>
  <li><a href="#an-example-in-r" id="toc-an-example-in-r" class="nav-link" data-scroll-target="#an-example-in-r">An example in R</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Apriori analysis for quality assurance</h1>
  <div class="quarto-categories">
    <div class="quarto-category">R</div>
    <div class="quarto-category">Apriori analysis</div>
  </div>
  </div>

<div>
  <div class="description">
    Priori Patterns for Posterior Perfection
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Carmine Minichini </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">August 9, 2024</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="the-apriori-algorithm" class="level2">
<h2 class="anchored" data-anchor-id="the-apriori-algorithm">The Apriori algorithm</h2>
<p>The <strong>Apriori</strong> <a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> algorithm is a foundational data mining technique designed to discover frequent patterns and associations within datasets. Originally developed for market basket analysis — identifying which products customers commonly purchase together — it has since proven valuable across diverse domains including healthcare and web usage analysis.</p>
<p>The algorithm operates on a simple principle: it systematically examines data to identify which items frequently appear together, building from individual items to larger combinations based on their occurrence patterns.</p>
<p><span class="math display">
\begin{aligned}
\begin{array}{c|c}
\hline
\text { Case } &amp; \text { Defects } \\
\hline
Case \ 1 &amp; [Defect \ 1, Defect \ 2,Defect \ 3] \\
Case \ 2 &amp; [Defect \ 1, Defect \ 2] \\
Case \ 3 &amp; [Defect \ 1, Defect \ 4] \\
Case \ 4 &amp; [Defect \ 1, Defect \ 4,Defect \ 5,Defect \ 6] \\
\end{array}
\end{aligned}
</span></p>
<section id="application-in-quality-assurance" class="level3">
<h3 class="anchored" data-anchor-id="application-in-quality-assurance">Application in quality assurance</h3>
<p>In quality assurance, the Apriori algorithm transforms how we analyze defect patterns. Rather than treating each defect as an isolated incident, it reveals the interconnected nature of quality issues across process instances. For instance, discovering that <span class="double-underline">interface errors</span> and <span class="double-underline">data validation failures</span> frequently co-occur suggests these aren’t isolated problems but symptoms of a deeper integration issue.</p>
<p>The practical applications span multiple quality management areas:</p>
<ul>
<li><p><strong>Strategic Process Improvement:</strong> Instead of addressing defects randomly, teams can prioritize areas where multiple quality issues cluster together, maximizing the impact of improvement efforts.</p></li>
<li><p><strong>Enhanced Root Cause Analysis:</strong> When certain defects consistently appear together, it signals shared underlying causes. This pattern recognition accelerates problem-solving by directing investigation toward common sources rather than treating symptoms separately.</p></li>
<li><p><strong>Operational Efficiency:</strong> Understanding defect relationships allows teams to design remediation strategies that address multiple issues simultaneously, reducing redundant work and accelerating resolution times.</p></li>
<li><p><strong>Predictive Quality Management:</strong> Once patterns are established, the presence of one defect type can serve as an early warning system for related issues, enabling proactive intervention before problems cascade.</p></li>
</ul>
</section>
</section>
<section id="about-the-data" class="level2">
<h2 class="anchored" data-anchor-id="about-the-data">About the data</h2>
<p>This dataset represents an anonymized subset of real-world quality assurance data, providing an authentic foundation for demonstrating the Apriori algorithm’s practical applications. While the specific defect identifiers have been obscured, the underlying patterns and relationships remain intact, offering genuine insights into how defect associations manifest in actual production environments.</p>
</section>
<section id="the-three-core-metrics" class="level2">
<h2 class="anchored" data-anchor-id="the-three-core-metrics">The three core metrics</h2>
<p>The Apriori algorithm identifies meaningful relationships through three key metrics that work together to reveal patterns:</p>
<ul>
<li><p><span class="highlight">Support</span> measures how frequently a item combination appears across all items. It answers: “How common is this pattern?” High support indicates widespread occurrence. For example, within quality management areas, this could help prioritise the most prevalent issues.</p></li>
<li><p><span class="highlight">Confidence</span> quantifies the reliability of a relationship by measuring how often item Y occurs when item X is present. It answers: “If I see item X, how likely am I to also find item Y?”</p></li>
<li><p><span class="highlight">Lift</span> determines whether items occur together more often than random chance would suggest.</p></li>
</ul>
<p>These metrics work in combination to filter noise from meaningful patterns. For instance, a rule with high support ensures the pattern is frequent enough to matter, high confidence makes it reliable for prediction, and high lift confirms the relationship isn’t just coincidental.</p>
<section id="support" class="level3">
<h3 class="anchored" data-anchor-id="support">Support</h3>
<p>Mathematically defined as the proportion of transactions containing a specific itemset, support answers the fundamental question: “How often does this pattern appear?”</p>
<p><span class="math display">\text{support}({X}) = \frac{\text{Number of transactions containing } X}{\text{Total number of transactions}}</span></p>
<p>In quality assurance contexts, high support values indicate widespread defect patterns that warrant immediate attention due to their prevalence. For instance, if a defect combination has 20% support, it means this pattern occurs in one out of every five cases, suggesting a systematic issue requiring priority investigation. Support serves as the foundation for identifying frequent patterns before analyzing their relationships through confidence and lift metrics.</p>
</section>
<section id="confidence" class="level3">
<h3 class="anchored" data-anchor-id="confidence">Confidence</h3>
<p>The confidence of a rule <code>{X} -&gt; {Y}</code> is defined as</p>
<p><span class="math display">\text{confidence}({X} \rightarrow {Y}) = P({Y} | {X})</span></p>
<p>where <span class="math inline">P({Y} | {X})</span> is the conditional probability of observing <span class="math inline">Y</span> given that <span class="math inline">X</span> has occurred. Mathematically, this is expressed as: <span class="math display">P({Y} | {X}) = \frac{P(X \cap Y)}{P(X)}</span></p>
<p>where <span class="math inline">P(X \cap Y)</span> represents the joint probability of both events occurring together, and <span class="math inline">P(X)</span> is the marginal probability of event <span class="math inline">X</span>. The confidence metric measures how reliable or trustworthy the association rule <code>{X} -&gt; {Y}</code> is. It represents the proportion of transactions containing <span class="math inline">X</span> that also contain <span class="math inline">Y</span>. In other words, it answers the question: “When <span class="math inline">X</span> occurs, how often does <span class="math inline">Y</span> also occur?”</p>
<p>A confidence value closer to 1 (or 100%) indicates a stronger association between <span class="math inline">X</span> and <span class="math inline">Y</span>, meaning that if <span class="math inline">X</span> is present in a transaction, we can be more confident that <span class="math inline">Y</span> will also be present. Conversely, a confidence value closer to 0 suggests a weaker association, implying that the presence of <span class="math inline">X</span> does not reliably indicate the presence of <span class="math inline">Y</span>.</p>
<section id="confidence-interpretation" class="level4">
<h4 class="anchored" data-anchor-id="confidence-interpretation">Confidence: interpretation</h4>
<p>Let’s examine rule #3 where:</p>
<p><span class="math inline">X</span> = <span class="math inline">D_{18}</span></p>
<p><span class="math inline">Y</span> = <span class="math inline">D_7</span></p>
<p>With <span class="math inline">\text{confidence}({X} \rightarrow {Y}) = 0.75</span>, we can draw the following conclusions:</p>
<ol type="1">
<li><p><strong>Predictive Reliability</strong>: The 75% confidence indicates that when defect <span class="math inline">D_{18}</span> occurs, there’s a three-in-four chance that defect <span class="math inline">D_7</span> will also be present. This makes <span class="math inline">D_{18}</span> a reliable predictor for <span class="math inline">D_7</span>.</p></li>
<li><p><strong>Shared Root Cause:</strong> Such a strong association suggests these defects likely stem from a common underlying issue rather than independent failures. This points to systemic problems in related process components.</p></li>
</ol>
</section>
</section>
<section id="lift" class="level3">
<h3 class="anchored" data-anchor-id="lift">Lift</h3>
<p>The lift of a rule <code>{X} -&gt; {Y}</code> is defined as</p>
<p><span class="math display">\text{lift}({X} \rightarrow {Y}) = \frac{P({Y} | {X})}{P({Y})}</span></p>
<p>where <span class="math inline">P({Y} | {X})</span> is the conditional probability of observing <span class="math inline">Y</span> given that <span class="math inline">X</span> has occurred, and <span class="math inline">P({Y})</span> is the marginal probability of observing <span class="math inline">Y</span>. A lift value greater than 1 indicates that the co-occurrence of <span class="math inline">X</span> and <span class="math inline">Y</span> is higher than expected if they were statistically independent, while a lift value less than 1 indicates that the co-occurrence is lower than expected.</p>
<section id="lift-interpretation" class="level4">
<h4 class="anchored" data-anchor-id="lift-interpretation">Lift: interpretation</h4>
<p>Continuing with rule #3 where:</p>
<p><span class="math inline">X</span> = <span class="math inline">D_{18}</span></p>
<p><span class="math inline">Y</span> = <span class="math inline">D_7</span></p>
<p>The probability of defect <span class="math inline">D_7</span> occurring, without considering any other factors, is <strong>5%</strong>. In other words, in <strong>5%</strong> of all cases, defect <span class="math inline">D_7</span> is present.</p>
<p>However, when you look at cases where defect <span class="math inline">D_{18}</span> is present, you find that the probability of defect <span class="math inline">D_7</span> occurring is ~41.9%.</p>
<p>Using the lift formula, we can calculate the lift of the rule <span class="math inline">D_{18}</span> → <span class="math inline">D_7</span> as follows:</p>
<p><span class="math display">\text{lift}({X} \rightarrow {Y}) = \frac{P({Y} | {X})}{P({Y})} = \frac{0.419}{0.05} = 8.39</span></p>
<p>The lift value of <strong>8.39</strong> indicates that when defect <span class="math inline">D_{18}</span> is present, the probability of defect <span class="math inline">D_7</span> occurring is 8.39 times higher than the probability of defect <span class="math inline">D_7</span> occurring without considering the presence of <span class="math inline">D_{18}</span>.</p>
<p>This suggests that the occurrence of <span class="math inline">D_{18}</span> and <span class="math inline">D_7</span> together is not independent or random, but rather there is a strong positive association between the two defects. This information can be used to further investigate the relationship between <span class="math inline">D_{18}</span> and <span class="math inline">D_7</span> and potentially uncover underlying factors or dependencies that contribute to their co-occurrence.</p>
</section>
</section>
</section>
<section id="an-example-in-r" class="level2">
<h2 class="anchored" data-anchor-id="an-example-in-r">An example in R</h2>
<p>The following implementation demonstrates how to apply Apriori analysis to defect data using R. The interactive table below shows the discovered association rules, with color-coded metrics to highlight the strongest patterns. The network visualization reveals the relationships between defects.</p>
<div class="cell" data-hash="index_cache/html/apriori-rules_490ce7537fddcf8824809f39a1cf1758">
<div class="sourceCode cell-code" id="annotated-cell-1"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-1-1"><a href="#annotated-cell-1-1" aria-hidden="true" tabindex="-1"></a>rules <span class="ot">&lt;-</span> <span class="fu">apriori</span>(trans,</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="1">1</button><span id="annotated-cell-1-2" class="code-annotation-target"><a href="#annotated-cell-1-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">parameter =</span> <span class="fu">list</span>(<span class="at">supp=</span><span class="dv">3</span><span class="sc">/</span><span class="fu">length</span>(items_list),</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="2">2</button><span id="annotated-cell-1-3" class="code-annotation-target"><a href="#annotated-cell-1-3" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">conf=</span><span class="fl">0.1</span>,</span>
<span id="annotated-cell-1-4"><a href="#annotated-cell-1-4" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">target=</span> <span class="st">"rules"</span>),</span>
<span id="annotated-cell-1-5"><a href="#annotated-cell-1-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">control =</span> <span class="fu">list</span>(<span class="at">verbose=</span><span class="cn">FALSE</span>))</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-1" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-1" data-code-annotation="1" data-code-lines="2">3/length(items_list) means minimum 3 out of total transactions must contain an itemset for it to be considered frequent</span>
</dd>
<dt data-target-cell="annotated-cell-1" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-1" data-code-annotation="2" data-code-lines="3">conf=0.1 means the minimum confidence threshold is set to 0.1 or 10%. This filters out association rules where the consequent (right-hand side) occurs less than 10% of the times when the antecedent (left-hand side) occurs</span>
</dd>
</dl>
</div>
</div>
<div class="cell" data-hash="index_cache/html/apriori-rules-df_731bd05b99b77dcc0764ee17bf40f3b8">
<div class="cell-output-display">

<div class="reactable html-widget html-fill-item" id="htmlwidget-eb24b316067dcbc1204a" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-eb24b316067dcbc1204a">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"Rule":[1,2,3,4,5,6,7,8,9,10,11,12],"rules":["{} => {D_1}","{} => {D_0}","{D_18} => {D_7}","{D_41} => {D_23}","{D_16} => {D_11}","{D_11} => {D_16}","{D_2} => {D_1}","{D_11} => {D_7}","{D_10} => {D_7}","{D_10} => {D_1}","{D_23} => {D_0}","{D_0} => {D_23}"],"Lift":[1,1,8.39,5.27,6,6,1.24,1.44,1.28,1.41,1.51,1.51],"Support":[0.1,0.17,0,0,0.01,0.01,0,0.01,0.01,0.01,0.02,0.02],"Confidence":[0.1,0.17,0.75,0.38,0.31,0.13,0.12,0.13,0.11,0.14,0.26,0.11]},"columns":[{"id":"Rule","name":"Rule","type":"numeric","width":50,"align":"center"},{"id":"rules","name":"X ⇒ Y","type":"character","filterable":true},{"id":"Lift","name":"Lift","type":"numeric","width":60,"align":"center","style":[{"background":"#FFFFFF"},{"background":"#FFFFFF"},{"background":"#0085A1"},{"background":"#6BB8C8"},{"background":"#52ACBF"},{"background":"#52ACBF"},{"background":"#F6FBFB"},{"background":"#EFF7F9"},{"background":"#F5FAFB"},{"background":"#F0F8F9"},{"background":"#EDF6F8"},{"background":"#EDF6F8"}]},{"id":"Support","name":"Support","type":"numeric","width":80,"align":"center"},{"id":"Confidence","name":"Confidence","type":"numeric","width":100,"align":"center","style":[{"background":"#FFFFFF"},{"background":"#FFF4E6"},{"background":"#FF9F1A"},{"background":"#FFD59C"},{"background":"#FFDFB5"},{"background":"#FFFAF4"},{"background":"#FFFCF7"},{"background":"#FFFAF4"},{"background":"#FFFDFB"},{"background":"#FFF9F0"},{"background":"#FFE7C6"},{"background":"#FFFDFB"}]}],"defaultPageSize":6,"showPageSizeOptions":true,"pageSizeOptions":[6,5],"dataKey":"6d1aea19a034e3fbdc337ab9557168dc"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="cell" data-hash="index_cache/html/apriori-networkplot_559c7a685a48bb8f353d0aa651d0a4c4">
<div class="sourceCode cell-code" id="annotated-cell-2"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-2-1"><a href="#annotated-cell-2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(rules,</span>
<span id="annotated-cell-2-2"><a href="#annotated-cell-2-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">method =</span> <span class="st">"graph"</span>,</span>
<span id="annotated-cell-2-3"><a href="#annotated-cell-2-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">engine =</span> <span class="st">"htmlwidget"</span>,</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="1">1</button><span id="annotated-cell-2-4" class="code-annotation-target"><a href="#annotated-cell-2-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">shading =</span> <span class="st">"confidence"</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-2" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-2" data-code-annotation="1" data-code-lines="4">Nodes with higher confidence rules will be shaded darker, allowing you to visually identify the most confident association rules at a glance</span>
</dd>
</dl>
</div>
<div class="cell-output-display">
<div class="visNetwork html-widget html-fill-item" id="htmlwidget-fb1551063a70feebf0dc" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-fb1551063a70feebf0dc">{"x":{"nodes":{"id":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22],"label":["D_0","D_1","D_10","D_11","D_16","D_18","D_2","D_23","D_41","D_7","rule 1","rule 2","rule 3","rule 4","rule 5","rule 6","rule 7","rule 8","rule 9","rule 10","rule 11","rule 12"],"group":[1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2],"value":[1,1,1,1,1,1,1,1,1,1,59,100,1,1,2,2,1,2,2,3,9,9],"color":["#CBD2FC","#CBD2FC","#CBD2FC","#CBD2FC","#CBD2FC","#CBD2FC","#CBD2FC","#CBD2FC","#CBD2FC","#CBD2FC","#EEDCDC","#EECDCD","#EE1B1B","#EEA2A2","#EEB0B0","#EED5D5","#EED7D7","#EED5D5","#EED9D9","#EED2D2","#EEBCBC","#EEDBDB"],"title":["D_0","D_1","D_10","D_11","D_16","D_18","D_2","D_23","D_41","D_7","<B>[1]<\/B><BR><B>{}<\/B><BR>&nbsp;&nbsp; => <B>{D_1}<\/B><BR><BR>support = 0.101<BR>confidence = 0.101<BR>coverage = 1<BR>lift = 1<BR>count = 61<BR>order = 1<BR>id = 1","<B>[2]<\/B><BR><B>{}<\/B><BR>&nbsp;&nbsp; => <B>{D_0}<\/B><BR><BR>support = 0.169<BR>confidence = 0.169<BR>coverage = 1<BR>lift = 1<BR>count = 102<BR>order = 1<BR>id = 2","<B>[3]<\/B><BR><B>{D_18}<\/B><BR>&nbsp;&nbsp; => <B>{D_7}<\/B><BR><BR>support = 0.00497<BR>confidence = 0.75<BR>coverage = 0.00662<BR>lift = 8.39<BR>count = 3<BR>order = 2<BR>id = 3","<B>[4]<\/B><BR><B>{D_41}<\/B><BR>&nbsp;&nbsp; => <B>{D_23}<\/B><BR><BR>support = 0.00497<BR>confidence = 0.375<BR>coverage = 0.0132<BR>lift = 5.27<BR>count = 3<BR>order = 2<BR>id = 4","<B>[5]<\/B><BR><B>{D_16}<\/B><BR>&nbsp;&nbsp; => <B>{D_11}<\/B><BR><BR>support = 0.00662<BR>confidence = 0.308<BR>coverage = 0.0215<BR>lift = 6<BR>count = 4<BR>order = 2<BR>id = 5","<B>[6]<\/B><BR><B>{D_11}<\/B><BR>&nbsp;&nbsp; => <B>{D_16}<\/B><BR><BR>support = 0.00662<BR>confidence = 0.129<BR>coverage = 0.0513<BR>lift = 6<BR>count = 4<BR>order = 2<BR>id = 6","<B>[7]<\/B><BR><B>{D_2}<\/B><BR>&nbsp;&nbsp; => <B>{D_1}<\/B><BR><BR>support = 0.00497<BR>confidence = 0.125<BR>coverage = 0.0397<BR>lift = 1.24<BR>count = 3<BR>order = 2<BR>id = 7","<B>[8]<\/B><BR><B>{D_11}<\/B><BR>&nbsp;&nbsp; => <B>{D_7}<\/B><BR><BR>support = 0.00662<BR>confidence = 0.129<BR>coverage = 0.0513<BR>lift = 1.44<BR>count = 4<BR>order = 2<BR>id = 8","<B>[9]<\/B><BR><B>{D_10}<\/B><BR>&nbsp;&nbsp; => <B>{D_7}<\/B><BR><BR>support = 0.00662<BR>confidence = 0.114<BR>coverage = 0.0579<BR>lift = 1.28<BR>count = 4<BR>order = 2<BR>id = 9","<B>[10]<\/B><BR><B>{D_10}<\/B><BR>&nbsp;&nbsp; => <B>{D_1}<\/B><BR><BR>support = 0.00828<BR>confidence = 0.143<BR>coverage = 0.0579<BR>lift = 1.41<BR>count = 5<BR>order = 2<BR>id = 10","<B>[11]<\/B><BR><B>{D_23}<\/B><BR>&nbsp;&nbsp; => <B>{D_0}<\/B><BR><BR>support = 0.0182<BR>confidence = 0.256<BR>coverage = 0.0712<BR>lift = 1.51<BR>count = 11<BR>order = 2<BR>id = 11","<B>[12]<\/B><BR><B>{D_0}<\/B><BR>&nbsp;&nbsp; => <B>{D_23}<\/B><BR><BR>support = 0.0182<BR>confidence = 0.108<BR>coverage = 0.169<BR>lift = 1.51<BR>count = 11<BR>order = 2<BR>id = 12"],"shape":["box","box","box","box","box","box","box","box","box","box","circle","circle","circle","circle","circle","circle","circle","circle","circle","circle","circle","circle"],"x":[0.9310893241671321,0.232610525663943,-0.09124766510019766,-0.9079325058084449,-0.7715708179397436,-0.3429365597055549,-0.1260470674239758,0.7434602281770728,0.3284780728502998,-0.661549053047215,0.5167885577758773,0.9765902408798455,-0.5765146601189018,0.5538496481612964,-1,-0.6772796383516655,0.08473300209052659,-0.9021411085085387,-0.3285240779710809,0.07484971166838394,0.6931425055396268,1],"y":[0.03723911875413433,0.5386294209863638,-0.1286861455420879,0.09390049059198446,0.6033678353513585,-1,1,-0.4857464521796682,-0.9513169804582825,-0.5095341005640961,0.7124906909415152,0.3449042460669771,-0.8164072597792029,-0.763514964174376,0.3918374165371261,0.3378600092149127,0.8171406982731999,-0.2548811219835382,-0.3834493931161613,0.2067254362310873,-0.1801998606567343,-0.2749158937909721]},"edges":{"from":[6,9,5,4,7,4,3,3,8,1,11,12,13,14,15,16,17,18,19,20,21,22],"to":[13,14,15,16,17,18,19,20,21,22,2,1,10,8,4,5,2,10,10,2,1,8],"arrows":["to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"edges":{"smooth":false},"physics":{"stabilization":false},"interaction":{"hover":true,"zoomSpeed":1}},"groups":["1","2"],"width":null,"height":null,"idselection":{"enabled":true,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":null,"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","igraphlayout":{"type":"square"},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);","highlight":{"enabled":true,"hoverNearest":true,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":false,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"}},"evals":[],"jsHooks":[]}</script>
</div>
</div>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p><a href="https://en.wikipedia.org/wiki/Apriori_algorithm">Apriori wikipedia page</a><a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Handle positioning of the toggle
      window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
      const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
      for (let i=0; i<annoteTargets.length; i++) {
        const annoteTarget = annoteTargets[i];
        const targetCell = annoteTarget.getAttribute("data-target-cell");
        const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
        const contentFn = () => {
          const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          if (content) {
            const tipContent = content.cloneNode(true);
            tipContent.classList.add("code-annotation-tip-content");
            return tipContent.outerHTML;
          }
        }
        const config = {
          allowHTML: true,
          content: contentFn,
          onShow: (instance) => {
            selectCodeLines(instance.reference);
            instance.reference.classList.add('code-annotation-active');
            window.tippy.hideAll();
          },
          onHide: (instance) => {
            unselectCodeLines();
            instance.reference.classList.remove('code-annotation-active');
          },
          maxWidth: 300,
          delay: [50, 0],
          duration: [200, 0],
          offset: [5, 10],
          arrow: true,
          appendTo: function(el) {
            return el.parentElement.parentElement.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto',
          placement: 'right',
          popperOptions: {
            modifiers: [
            {
              name: 'flip',
              options: {
                flipVariations: false, // true by default
                allowedAutoPlacements: ['right'],
                fallbackPlacements: ['right', 'top', 'top-start', 'top-end'],
              },
            },
            {
              name: 'preventOverflow',
              options: {
                mainAxis: false,
                altAxis: false
              }
            }
            ]        
          }      
        };
        window.tippy(annoteTarget, config); 
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>